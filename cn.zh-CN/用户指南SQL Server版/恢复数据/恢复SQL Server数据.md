# 恢复SQL Server数据 {#concept_o52_hlx_52b .concept}

有备份的情况下可以使用备份进行数据修复，恢复SQL Server的数据。

您可以通过多种方式恢复RDS for SQL Server实例的数据。

-   [恢复到已有实例](#)
-   [恢复到全新实例](#)
-   [通过临时实例恢复到主实例](#)
-   [覆盖性恢复](#)

## 恢复到已有实例 {#section_huifu .section}

您可以将实例的全量备份集恢复到您已有的实例，包括当前实例本身。可以恢复实例的所有数据库或者部分数据库。

本功能适用于以下RDS for SQL Server实例：

-   SQL Server 2012/2016企业版高可用系列
-   SQL Server 2012/2016标准版高可用系列
-   SQL Server 2012企业版基础系列
-   SQL Server 2012/2016 Web版基础系列

**操作步骤**

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  选择备份集所属实例所在的地域。

    ![选择地域](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7814/154763090436543_zh-CN.png)

3.  单击备份集所属实例的ID。
4.  在左侧导航栏中，选择**备份恢复**。
5.  在页面右上角，单击**数据库恢复**。
6.  （仅高可用系列实例需要执行本步骤）选择**恢复到已有实例**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/17685/154763090410029_zh-CN.png)

7.  设置以下参数，然后单击**确定**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/17685/154763090410031_zh-CN.png)

    **说明：** 若有相同数据库名存在，需要修改恢复后库名。

    |参数|说明|
    |--|--|
    |还原方式|对于恢复到已有实例，仅支持按备份集进行恢复。|
    |备份集|选择您要恢复的备份集。系统默认显示当前实例下的所有全量备份集。

|
    |目标实例名|选择要将备份集恢复到哪个实例。系统默认显示属于当前阿里云账号的、在当前地域的、与当前实例版本相同的实例，包括当前实例。

**说明：** 显示的目标实例较多时，可以使用搜索框进行筛选。

|
    |需恢复的数据库|     1.  选择要恢复的数据库。系统默认显示且勾选了备份集中的所有数据库。
        -   如果要恢复整个实例的数据，请保持勾选所有数据库。
        -   如果要恢复指定数据库，请只勾选部分数据库。
    2.  设置恢复后的数据库名。系统默认使用备份集中的数据库名。

**说明：** 恢复后的数据库名不能与目标实例中已有的数据库名相同。

 |


## 恢复到全新实例 {#section_l2n_r4x_52b .section}

本功能原名为克隆实例，用于将实例的历史备份恢复到一个全新的实例。您可以按时间点或者备份集恢复数据。按备份集恢复时，可以恢复备份集中的所有数据库或者部分数据库。

费用：需要新建实例，费用与新购实例相同。

本功能适用于以下RDS for SQL Server实例：

-   SQL Server 2017集群版
-   SQL Server 2012/2016企业版高可用系列
-   SQL Server 2012/2016标准版高可用系列
-   SQL Server 2012/2016 Web版基础系列
-   SQL Server 2012企业版基础系列

**操作步骤**

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  选择实例所在的地域。

    ![选择地域](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7814/154763090436543_zh-CN.png)

3.  单击实例的ID。
4.  在左侧导航栏中，选择**备份恢复**。
5.  在页面右上角，单击**数据库恢复**。
6.  在弹出的对话框中，选择**恢复到全新实例**。

    **说明：** 若是SQL Server 2017集群版实例，在右侧单击**恢复**，选择**数据库恢复（原克隆实例）**并单击**确定**。

7.  在弹出的页面中，选择新实例的计费方式：**包年包月**或**按量付费**。
8.  设置新实例的参数。

    |参数名称|说明|
    |----|--|
    |**还原方式**|按时间点或备份集来复制数据。|
    |**还原时间**|若还原方式选择的是**按时间点**，则有该参数。选择所需复制数据所在的时间点。|
    |**备份集**|若还原方式选择的是**按备份集**，则有该参数。选择要复制的备份集。|
    |**数据库**|     -   **全部**：恢复备份集中的所有数据库。
    -   **部分**：恢复备份集中的部分数据库。如果选择此项，需要将要恢复的数据库添加到右侧。
 |
    |**系列/可用区/规格/存储空间/网络类型/购买时长**|关于这些参数的说明，请参见[创建实例](../cn.zh-CN/快速入门MySQL版/创建实例.md)。|
    |**购买量**|设置购买数量，批量创建克隆实例。单次最多可以创建5个克隆实例。|

9.  单击**立即购买**。
10. 勾选**《关系型数据库 RDS服务条款》**，单击**去支付**，完成支付即可。

## 通过临时实例恢复到原实例 {#section_ejq_2yz_52b .section}

本功能适用于以下RDS for SQL Server实例：

-   SQL Server 2012企业版基础系列
-   SQL Server 2012/2016 Web版基础系列
-   SQL Server 2008 R2

具体操作请参见[通过临时实例恢复SQL Server数据](cn.zh-CN/用户指南SQL Server版/恢复数据/通过临时实例恢复SQL Server数据.md#)。

## 直接覆盖原实例 {#section_ilr_kgn_ydb .section}

您可以直接将指定备份数据覆盖到原实例，指定的备份数据之后的数据将会全部丢失。建议您通过以上其他恢复方式进行更加安全的数据恢复。

本功能适用于以下实例：

-   RDS for SQL Server 2008 R2
-   RDS for SQL Server 2017集群版

**操作步骤**

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![选择地域](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7814/154763090436543_zh-CN.png)

3.  找到目标实例，单击实例ID。
4.  选择左侧导航栏中单击**备份恢复**。
5.  在**数据备份**标签页中，选择时间范围，单击**查询**。
6.  -   对于SQL Server 2017集群版实例，找到目标备份，单击**恢复**，在弹出的对话框中，选择**覆盖性恢复实例**，单击**确定**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/41604/154763090433807_zh-CN.png)

-   对于RDS for SQL Server 2008 R2实例，找到目标备份，单击**覆盖性恢复**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/17685/154763090410049_zh-CN.png)

7.  在弹出的确认框中，单击**确定**。

## 相关API {#section_hcn_555_jgb .section}

|API|描述|
|---|--|
|[RecoveryDBInstance](../cn.zh-CN/API参考/备份恢复/RecoveryDBInstance.md#)|恢复数据库|

